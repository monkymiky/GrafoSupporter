<div class="contacts-page">
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-lg-10 col-xl-8">
        <!-- Header -->
        <div class="text-center mb-5">
          <h1 class="display-4 mb-3">
            <i class="bi bi-envelope-heart me-2"></i>Contattami
          </h1>
          <p class="lead text-muted">
            Il tuo feedback è prezioso per me! Aiutami a migliorare
            GrafoSupporter condividendo le tue esperienze, suggerimenti o
            segnalando eventuali problemi.
          </p>
        </div>

        <!-- Info Box -->
        <div class="alert alert-info mb-4" role="alert">
          <h5 class="alert-heading">
            <i class="bi bi-info-circle me-2"></i>Come fornire un feedback utile
          </h5>
          <p class="mb-2">
            Per aiutarmi a capire meglio il tuo messaggio, prova a includere:
          </p>
          <ul class="mb-0">
            <li>
              <strong>Cosa stavi facendo:</strong> descrivi le azioni che hai
              compiuto
            </li>
            <li>
              <strong>Cosa ti aspettavi:</strong> cosa pensavi sarebbe successo
            </li>
            <li><strong>Cosa è successo:</strong> cosa è accaduto realmente</li>
          </ul>
        </div>

        <!-- Form -->
        <div class="card shadow-sm">
          <div class="card-body p-4">
            <form (ngSubmit)="onSubmit()" #contactForm="ngForm">
              <!-- Nome -->
              <div class="mb-4">
                <label for="name" class="form-label fw-semibold">
                  Nome <span class="text-danger">*</span>
                </label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  id="name"
                  name="name"
                  [(ngModel)]="feedback.name"
                  required
                  placeholder="Il tuo nome"
                />
              </div>

              <!-- Email -->
              <div class="mb-4">
                <label for="email" class="form-label fw-semibold">
                  Email <span class="text-danger">*</span>
                </label>
                <input
                  type="email"
                  class="form-control form-control-lg"
                  id="email"
                  name="email"
                  [(ngModel)]="feedback.email"
                  required
                  placeholder="tua.email@esempio.com"
                />
                <small class="form-text text-muted">
                  La userò solo per risponderti
                </small>
              </div>

              <!-- Categoria -->
              <div class="mb-4">
                <label class="form-label fw-semibold mb-3">
                  Di cosa vuoi parlarci? <span class="text-danger">*</span>
                </label>
                <div class="row g-3">
                  @for (category of categories; track category.value) {
                  <div class="col-md-6">
                    <div
                      class="category-card"
                      [class.selected]="feedback.category === category.value"
                      (click)="feedback.category = category.value"
                      role="button"
                      tabindex="0"
                      (keydown.enter)="feedback.category = category.value"
                      (keydown.space)="feedback.category = category.value"
                    >
                      <div class="d-flex align-items-start">
                        <div class="category-icon">
                          <i [class]="'bi ' + category.icon"></i>
                        </div>
                        <div class="flex-grow-1">
                          <h6 class="mb-1 fw-semibold">{{ category.label }}</h6>
                          <p class="text-muted small mb-0">
                            {{ category.description }}
                          </p>
                        </div>
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="category"
                            [id]="'category-' + category.value"
                            [value]="category.value"
                            [(ngModel)]="feedback.category"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  }
                </div>
                @if (selectedCategory) {
                <div class="mt-3 p-3 bg-light rounded">
                  <small class="text-muted">
                    <i class="bi bi-lightbulb me-1"></i>
                    <strong>Suggerimento:</strong>
                    {{ selectedCategory.example }}
                  </small>
                </div>
                }
              </div>

              <!-- Oggetto -->
              <div class="mb-4">
                <label for="subject" class="form-label fw-semibold">
                  Oggetto <span class="text-danger">*</span>
                </label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  id="subject"
                  name="subject"
                  [(ngModel)]="feedback.subject"
                  required
                  placeholder="Breve descrizione del tuo messaggio"
                />
                <small class="form-text text-muted">
                  Esempio: "Problema con la ricerca" o "Suggerimento per
                  migliorare..."
                </small>
              </div>

              <!-- Messaggio -->
              <div class="mb-4">
                <label for="message" class="form-label fw-semibold">
                  Messaggio <span class="text-danger">*</span>
                </label>
                <textarea
                  class="form-control"
                  id="message"
                  name="message"
                  [(ngModel)]="feedback.message"
                  required
                  rows="6"
                  placeholder="Descrivi nel dettaglio il tuo feedback..."
                ></textarea>
                <small class="form-text text-muted">
                  Più dettagli fornisci, meglio posso aiutarti!
                </small>
              </div>

              <!-- Submit Button -->
              <div class="d-grid gap-2">
                <button
                  type="submit"
                  class="btn btn-primary btn-lg"
                  [disabled]="isSubmitting"
                >
                  @if (isSubmitting) {
                  <span
                    class="spinner-border spinner-border-sm me-2"
                    role="status"
                    aria-hidden="true"
                  ></span>
                  Invio in corso... } @else {
                  <i class="bi bi-send me-2"></i>Invia messaggio }
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Additional Info -->
        <div class="mt-4 text-center">
          <p class="text-muted small">
            <i class="bi bi-shield-check me-1"></i>
            I tuoi dati sono trattati in conformità con la privacy policy. Non
            condivideremo mai le tue informazioni con terze parti.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
